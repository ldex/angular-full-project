<h2>Shopping Cart</h2>

@if (products$ | async; as products) {
  <div>
    <ul class="products">
      @for (product of products | groupBy:'id'; track product) {
        <li>
          <span class="name">{{product.value[0].name}}</span>
          <span class="description">{{product.value[0].description}}</span>
          <span class="price">{{product.value[0].price | currency:'CAD':'symbol-narrow':'.2'}}
          x{{product.value.length}}</span>
        </li>
      }
    </ul>
    <h2>Total = {{productsTotal$ | async | currency:'CAD':'symbol-narrow':'.2'}}</h2>
    <p>
      <button (click)="buy()">Buy Now</button>
    </p>
  </div>
} @else {
  <div style="margin-bottom: 80px">No product in your cart!</div>
}